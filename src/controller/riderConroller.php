<?phpnamespace controller;use model\riderModel;include_once '../model/riderModel.php';class riderConroller{  public function displayListOrder()  {      $orders = new riderModel();      $data = $orders->displayListOrder();      $tr = '';      if ($data){          foreach ($data as $row){              $costumerName = $row['CostumerName'];              $address = $row['Address'];              $email = $row['Email'];              $phone= $row['PhoneNumber'];              $tr .='               <tr>                <td>'.$costumerName.'</td>                <td>'.$address.'</td>                 <td>'.$phone.'</td>                <td>                <button id="btn_view" value="'.$email.'" class="btn btn-primary badge" type="button">                 view                </button>              </td>              </tr>              ';          }          echo $tr;      }else{          echo "<h3>No Delivery Assign</h3>";      }  }  public function displayOrdersDetails()  {     $email = $_POST['email'];    $orderDetails = new riderModel();    $data =  $orderDetails->displayOrdersDetails($email);    $modal = '';    if ($data){        $modal .='      <div class="modal fade" id="DetailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">      <form id="formDrop" action="../controller/riderConroller.php" method="post" class="modal-dialog modal-dialog-centered">        <div class="modal-content">          <div class="modal-header">            <h1 class="modal-title  fs-6 text-muted" id="exampleModalLabel">Order Details</h1>            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>          </div>          <div class="modal-body">          <table class="table table-borderless table-responsive-sm">           <thead>            <tr>              <th scope="col">Product Name</th>               <th scope="col">Quantity</th>                <th scope="col">Total</th>                 </tr>                </thead>              <tbody>        ';        $total = 0;        foreach ($data as $row){            $amount = $row['OrderAmount'];            $total += $amount ;            $modal .= '                <tr>                    <td>' . htmlspecialchars($row['ProductName']) . '</td>                    <td>' . htmlspecialchars($row['quantity']) . '</td>                    <td>' . htmlspecialchars($row['OrderAmount']) . '</td>                </tr>';        }        $modal .= '                <tr class="badge bg-secondary">                    <td colspan="2"><strong>Total:</strong></td>                    <td><strong >'.number_format($total, 2) . '</strong></td>                </tr>';        $modal .= '                        </tbody>                    </table>                    <label for="file">                      <input  name="fileUpload" type="file" accept="image/jpeg,image/png" class="form-control" alt="">                    </label>                    <input name="email" type="hidden" value="'.$email.'"  >                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>                    <button  type="submit" class="btn btn-danger">Drop Off</button>                </div>            </div>        </div>    </div>';      echo $modal;    }  }    public function dropOff()    {        $email = $_POST['email'];        $file = $_FILES['fileUpload'];        $drop = new riderModel();        if (!empty($file['name'])) {            $fileName = $file['name'];            // Set file directory and path            $fileDir = '../../proofUploaded/';            $filePath = $fileDir . $fileName;            move_uploaded_file($file['tmp_name'], $filePath);            $drop->dropOff($email, $fileName);        } else {            echo json_encode(['success' => false, 'message' => 'please upload proof']);        }    }}if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['action'])){    $controller = new riderConroller();    switch ($_POST['action']){        case 'order':            $controller->displayOrdersDetails();            break;        case 'drop':            $controller->dropOff();            break;    }}