<?phpnamespace model;include_once '../../config/Dbconnect.php';class cartModel extends \Dbconnect{    public function AddCart($productName, $price, $image, $quantity, $productId, $userId)    {        // First, check if the product already exists in the cart for this user        $query = "SELECT Quantity FROM cart WHERE ProductId = ? AND UserId = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('ii', $productId, $userId);        $stmt->execute();        $result = $stmt->get_result();        if ($result->num_rows > 0) {            // If the product exists, update the quantity            $row = $result->fetch_assoc();            $newQuantity = $row['Quantity'] + $quantity;            $updateQuery = "UPDATE cart SET Quantity = ?, price = ? WHERE ProductId = ? AND UserId = ?";            $updateStmt = $this->Connect()->prepare($updateQuery);            $updateStmt->bind_param('idii', $newQuantity, $price, $productId, $userId);            if ($updateStmt->execute()) {                echo json_encode(['success' => true, 'message' => 'Cart updated successfully']);            } else {                echo json_encode(['success' => false, 'error' => $updateStmt->error]);            }        } else {            // If the product does not exist, insert a new row            $insertQuery = "INSERT INTO cart(productname, price, image, Quantity, ProductId, UserId) VALUES (?, ?, ?, ?, ?, ?)";            $insertStmt = $this->Connect()->prepare($insertQuery);            $insertStmt->bind_param('sisiii', $productName, $price, $image, $quantity, $productId, $userId);            if ($insertStmt->execute()) {                echo json_encode(['success' => true, 'message' => 'Added to cart']);            } else {                echo json_encode(['success' => false, 'error' => $insertStmt->error]);            }        }    }    public function displayCartProduct($userId)    {        $query = "SELECT * FROM cart WHERE UserId = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('i', $userId);        $stmt->execute();        $result = $stmt->get_result();        if ($result->num_rows > 0) {            $dataRow = [];            while ($row = $result->fetch_assoc()) {                $dataRow[] = $row;            }            return $dataRow;        } else {            return null;        }    }    public function removeFromCart($cartId)    {        $query = "DELETE FROM cart WHERE id = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('i',$cartId);        if ($stmt->execute()){            echo json_encode(['success' => true, 'message' => 'success remove']);        }    }    public function deleteCartItem($userId)    {        $query = "DELETE FROM cart WHERE UserId = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('i',$userId);        $stmt->execute();    }}